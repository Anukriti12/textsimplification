{"ast":null,"code":"var _jsxFileName = \"/Users/anukumar/Desktop/Autumn 2024/Text Simplification/project_v3/client/src/components/Review/index.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport DiffMatchPatch from \"diff-match-patch\";\nimport styles from \"./styles.module.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Review = () => {\n  _s();\n  const {\n    state\n  } = useLocation();\n  const {\n    inputText,\n    outputText: initialOutputText\n  } = state || {\n    inputText: \"\",\n    outputText: \"\"\n  };\n  const [outputText, setOutputText] = useState(initialOutputText);\n  const [diffHtml, setDiffHtml] = useState(\"\");\n  const [isEditable, setIsEditable] = useState(false);\n  const [editHistory, setEditHistory] = useState([]);\n  const [isSidebarVisible, setIsSidebarVisible] = useState(false);\n  const navigate = useNavigate();\n  const [isHistoryVisible, setIsHistoryVisible] = useState(false); // Show/Hide history sidebar\n  const contentEditableRef = useRef(null); // Reference to the contentEditable div\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n  const [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n\n  // Function to calculate and render diff\n  const generateDiff = (input, output) => {\n    const dmp = new DiffMatchPatch();\n    const diffs = dmp.diff_main(input, output);\n    dmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n    return dmp.diff_prettyHtml(diffs);\n  };\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  // Effect to calculate diff whenever text changes\n  useEffect(() => {\n    const diffResult = generateDiff(inputText, outputText);\n    setDiffHtml(diffResult);\n  }, [inputText, outputText]);\n\n  //   const handleEdit = () => {\n  //     setIsEditable(true);\n  //   };\n\n  //   const handleSave = () => {\n  //     // Save the current state to history\n  //     setEditHistory((prev) => [\n  //       ...prev,\n  //       { timestamp: new Date().toLocaleString(), text: outputText },\n  //     ]);\n  //     alert(\"Saved successfully!\");\n  //     setIsEditable(false);\n  //   };\n\n  const handleSave = async (isAuto = false) => {\n    //\t\tsetIsSaveButtonVisible(false);\n    if (isAuto && isAuto.nativeEvent) {\n      isAuto = false; // Default behavior if called by an event\n    }\n    try {\n      const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n      if (!user) {\n        alert(\"User not logged in!\");\n        return;\n      }\n      const payload = {\n        userId: user._id,\n        email: user.email,\n        inputText,\n        ...(isEditable ? {\n          editedText: outputText\n        } : {\n          outputText,\n          editableText: outputText\n        })\n      };\n      const endpoint = isEditable ? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n      : \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\n      const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\n      const response = await fetch(endpoint, {\n        method,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(payload)\n      });\n      if (response.ok) {\n        const data = await response.json();\n        alert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n        //setShowSurveyPrompt(true); \n        console.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n        console.log(\"isEditable\", isEditable);\n        console.log(\"isAuto\", isAuto);\n        if (!isSaveButtonVisible) {\n          //edit, save, edit\n          setShowSurveyPrompt(false); // Show the survey prompt\n        } else if (isSaveButtonVisible && !isEditable && isAuto)\n          //true false -- first time save or edit button clicked\n          {\n            setShowSurveyPrompt(false);\n          } else if (isSaveButtonVisible && isEditable) {\n          setShowSurveyPrompt(true);\n        } else if (isSaveButtonVisible && !isEditable && !isAuto)\n          //true false -- first time save or edit button clicked\n          {\n            setShowSurveyPrompt(true);\n          }\n        setEditHistory(prev => [...prev, {\n          timestamp: new Date().toLocaleString(),\n          text: outputText\n        }]);\n        if (isEditable) {\n          {\n            setIsEditable(false); // Exit editing mode after saving edits\n            // disable saving button\n            setIsSaveButtonVisible(false); // Hide the save button\n            // Show the survey prompt\n            // setShowSurveyPrompt(true); \n          }\n        }\n      } else {\n        const error = await response.json();\n        alert(error.message || \"Failed to save simplification.\");\n      }\n    } catch (error) {\n      console.error(\"Error saving simplification:\", error);\n      alert(\"An error occurred. Please try again.\");\n    }\n  };\n  const handleEdit = () => {\n    let isAuto = true;\n    handleSave(isAuto); // Save the current output text\n    setIsEditable(true); // Enable editing mode\n    setIsSaveButtonVisible(true);\n  };\n  const handleHistoryClick = edit => {\n    setOutputText(edit.text);\n    const diffResult = generateDiff(inputText, edit.text);\n    setDiffHtml(diffResult);\n    setIsEditable(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: styles.navbar,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Text Simplification Study\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.white_btn,\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.sidebar} ${isSidebarVisible ? styles.expanded : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.historyIcon,\n          onClick: () => setIsSidebarVisible(!isSidebarVisible),\n          children: \"\\uD83D\\uDD52 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this), isSidebarVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.historyContent,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.closeButton,\n            onClick: () => setIsSidebarVisible(false),\n            children: \"\\u2716\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Edit History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: styles.historyList,\n            children: editHistory.map((edit, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: styles.historyItem,\n              onClick: () => handleHistoryClick(edit),\n              children: edit.timestamp\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.mainContent} ${isSidebarVisible ? styles.withSidebar : \"\"}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.textareas_container,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.text_container,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: styles.label,\n              htmlFor: \"inputText\",\n              children: \"Input Text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"inputText\",\n              className: `${styles.textarea} ${styles.side_by_side}`,\n              value: inputText,\n              readOnly: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.text_container,\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: styles.label,\n              htmlFor: \"outputText\",\n              children: \"System-generated Text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 15\n            }, this), isEditable ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"outputText\",\n              className: `${styles.textarea} ${styles.side_by_side}`,\n              value: outputText,\n              onChange: e => setOutputText(e.target.value),\n              placeholder: \"Output\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"diffText\",\n              className: `${styles.output_box} ${styles.side_by_side}`,\n              dangerouslySetInnerHTML: {\n                __html: diffHtml\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.button_container,\n          children: [isSaveButtonVisible && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${styles.save_btn} ${styles.text_btn}`,\n            onClick: handleSave,\n            disabled: isLoading,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 9\n          }, this), !isEditable && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${styles.edit_btn} ${styles.text_btn}`,\n            onClick: handleEdit,\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 4\n        }, this), showSurveyPrompt && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.survey_prompt,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Please take the survey to help us improve \", \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.link_btn,\n              onClick: () => navigate(\"/survey\", {\n                state: {\n                  email: JSON.parse(localStorage.getItem(\"user\")).email,\n                  inputText\n                }\n              }),\n              children: \"Take the Survey\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Review, \"w7L1MxS3JsF+xxc9wfne2m/3+V8=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Review;\nexport default Review;\n\n// import React from \"react\";\n// import { useState, useEffect, useRef } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import DiffMatchPatch from \"diff-match-patch\";\n// import styles from \"./styles.module.css\";\n\n// const Review = () => {\n//   const { state } = useLocation();\n//   const { inputText, outputText: initialOutputText } = state || {\n//     inputText: \"\",\n//     outputText: \"\",\n//   };\n//   const [outputText, setOutputText] = useState(initialOutputText);\n//   const [diffHtml, setDiffHtml] = useState(\"\"); // State for storing diff HTML\n//   const [isEditable, setIsEditable] = useState(false);\n//   const [editHistory, setEditHistory] = useState([]); // Array to store edit history\n//   const [isHistoryVisible, setIsHistoryVisible] = useState(false); // Show/Hide history sidebar\n//   const navigate = useNavigate();\n//   const contentEditableRef = useRef(null); // Reference to the contentEditable div\n\n// \tconst [isLoading, setIsLoading] = useState(false);\n\n// \tconst [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n// \tconst [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n\n//   // Function to calculate and render diff\n//   const generateDiff = (input, output) => {\n//     const dmp = new DiffMatchPatch();\n//     const diffs = dmp.diff_main(input, output);\n//     dmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n//     return dmp.diff_prettyHtml(diffs); // Generate diff HTML\n\n//   };\n\n//   // Effect to calculate diff whenever text changes\n//   useEffect(() => {\n//     const diffResult = generateDiff(inputText, outputText);\n//     setDiffHtml(diffResult);\n//   }, [inputText, outputText]);\n\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"token\");\n//     window.location.reload();\n//   };\n\n//   \tconst handleSave = async (isAuto = false) => {\n// //\t\tsetIsSaveButtonVisible(false);\n// if (isAuto && isAuto.nativeEvent) {\n// \tisAuto = false; // Default behavior if called by an event\n// }\n\n// \t\ttry {\n// \t\t  const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n// \t\t  if (!user) {\n// \t\t\talert(\"User not logged in!\");\n// \t\t\treturn;\n// \t\t  }\n\n// \t\t  const payload = {\n// \t\t\tuserId: user._id,\n// \t\t\temail: user.email,\n// \t\t\tinputText,\n// \t\t\t...(isEditable ? { editedText: outputText } : { outputText, editableText: outputText }),\n// \t\t  };\n\n// \t\t  const endpoint = isEditable\n// \t\t\t? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n// \t\t\t: \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\n// \t\t  const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\n// \t\t  const response = await fetch(endpoint, {\n// \t\t\tmethod,\n// \t\t\theaders: { \"Content-Type\": \"application/json\" },\n// \t\t\tbody: JSON.stringify(payload),\n// \t\t  });\n\n// \t\t  if (response.ok) {\n// \t\t\tconst data = await response.json();\n\n// \t\t\talert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n// \t\t\t//setShowSurveyPrompt(true); \n// \t\t\tconsole.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n// \t\t\tconsole.log(\"isEditable\", isEditable);\n// \t\t\tconsole.log(\"isAuto\", isAuto);\n// \t\t\tif (!isSaveButtonVisible) {  //edit, save, edit\n// \t\t\t\tsetShowSurveyPrompt(false); // Show the survey prompt\n// \t\t\t  }\n// \t\t\telse if (isSaveButtonVisible && !isEditable && isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(false);\n// \t\t\t}\n// \t\t\telse if (isSaveButtonVisible && isEditable)\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t} \n// \t\t\telse if (isSaveButtonVisible && !isEditable && !isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t}\n\n// \t\t\tsetEditHistory((prev) => [\n// \t\t\t\t...prev,\n// \t\t\t\t{ timestamp: new Date().toLocaleString(), text: outputText },\n// \t\t\t  ]);\n\n// \t\t\tif (isEditable) {\n// \t\t\t {\n// \t\t\t\tsetIsEditable(false); // Exit editing mode after saving edits\n// \t\t\t  // disable saving button\n// \t\t\t  setIsSaveButtonVisible(false); // Hide the save button\n// \t\t\t   // Show the survey prompt\n// \t\t\t // setShowSurveyPrompt(true); \n// \t\t\t }\n\n// \t\t  }} else {\n// \t\t\tconst error = await response.json();\n// \t\t\talert(error.message || \"Failed to save simplification.\");\n// \t\t  }\n// \t\t} catch (error) {\n// \t\t  console.error(\"Error saving simplification:\", error);\n// \t\t  alert(\"An error occurred. Please try again.\");\n// \t\t}\n\n// \t  };\n\n// \t  const handleHistoryClick = (edit) => {\n// \t\tsetOutputText(edit.text);\n// \t\tconst diffResult = generateDiff(inputText, edit.text);\n// \t\tsetDiffHtml(diffResult);\n// \t\tsetIsEditable(false);\n// \t  };\n\n// \tconst handleEdit = () => {\n// \t  let isAuto = true;\n// \t  handleSave(isAuto); // Save the current output text\n// \t  setIsEditable(true); // Enable editing mode\n// \t  setIsSaveButtonVisible(true);\n\n// \t};\n\n//   return (\n//     <>\n//       <nav className={styles.navbar}>\n//         <h1>Text Simplification Study</h1>\n//         <button className={styles.white_btn} onClick={handleLogout}>\n//           Logout\n//         </button>\n//       </nav>\n\n//       <div className={styles.main_container}>\n//         <div className={styles.description}>\n//           <p>\n//             Review the generated output and make any necessary edits. Changes\n//             are highlighted in real-time for easy visualization.\n//           </p>\n\n//       {/* Sidebar */}\n//       <div className={styles.sidebar}>\n//         <button\n//           className={styles.historyIcon}\n//           onClick={() => setIsHistoryVisible(!isHistoryVisible)}\n//         >\n//           ðŸ•’ {/* History Icon */}\n//         </button>\n//         {isHistoryVisible && (\n//           <div className={styles.historyPanel}>\n//             <h3>Edit History</h3>\n//             <ul className={styles.historyList}>\n//               {editHistory.map((edit, index) => (\n//                 <li\n//                   key={index}\n//                   className={styles.historyItem}\n//                   onClick={() => handleHistoryClick(edit)}\n//                 >\n//                   {edit.timestamp}\n//                 </li>\n//               ))}\n//             </ul>\n//           </div>\n//         )}\n//       </div>\n\n//           <div className={styles.form_container}>\n//             {/* Input and Diff Boxes */}\n//             <div className={styles.textareas_container}>\n//               {/* Input Text Box */}\n//               <div className={styles.text_container}>\n//                 <label className={styles.label} htmlFor=\"inputText\">\n//                   Input Text\n//                 </label>\n//                 <textarea\n//                   id=\"inputText\"\n//                   className={`${styles.textarea} ${styles.side_by_side}`}\n//                   value={inputText}\n//                   readOnly\n//                 ></textarea>\n//               </div>\n// <div className={styles.text_container}>\n//   <label className={styles.label} htmlFor=\"outputText\">\n//     System-generated Text\n//   </label>\n\n// {isEditable ? (\n//     <>\n//       <textarea\n//         id=\"outputText\"\n//         className={`${styles.textarea} ${styles.side_by_side}`}\n//         value={outputText}\n//         onChange={(e) => {\n//           const updatedText = e.target.value;\n//           setOutputText(updatedText); // Update the output text state\n//           const updatedDiff = generateDiff(inputText, updatedText); // Recalculate the diff\n//           setDiffHtml(updatedDiff); // Update the diff HTML in real-time\n\n//         }}\n//         placeholder=\"Output\"\n//       ></textarea>\n\n//     </>\n//   ) : (\n//     <div\n//       id=\"diffText\"\n//       className={`${styles.output_box} ${styles.side_by_side}`}\n//       dangerouslySetInnerHTML={{ __html: diffHtml }}\n//     ></div>\n//   )} \n// </div>\n\n//             </div>\n\n//     \t\t\t\t<div className={styles.button_container}>\n\n//     \t\t\t\t{isSaveButtonVisible && (\n//     \t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.save_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleSave}\n//     \t\t\t\t\tdisabled={isLoading}\n//     \t\t\t\t>\n//     \t\t\t\t\tSave\n//     \t\t\t\t</button>\n//     \t\t\t\t)}\n\n//     \t\t\t\t{!isEditable && (\n//     \t\t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.edit_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleEdit}\n//     \t\t\t\t\t>\n//     \t\t\t\t\tEdit\n//     \t\t\t\t\t</button>\n//     \t\t\t\t)}\n//     \t\t\t\t</div>\n//           {/* Survey Prompt */}\n//     \t  {showSurveyPrompt && (\n//                   <div className={styles.survey_prompt}>\n//                     <p>\n//                       Please take the survey to help us improve {\" \"}\n//                       <button\n//                         className={styles.link_btn}\n//                         onClick={() =>\n//                           navigate(\"/survey\", {\n//                             state: { email: JSON.parse(localStorage.getItem(\"user\")).email, inputText },\n//                           })\n//                         }\n//                       >\n//                         Take the Survey\n//                       </button>\n//                     </p>\n//                   </div>\n//                 )}\n\n//     \t\t\t</div>\n\n//     \t\t</div> \n//     \t\t</div>\n//     \t  </>\n//   );\n// };\n\n// export default Review;\n\n{/* \n \t\t  <div className={styles.text_container}>\n  <label className={styles.label} htmlFor=\"outputText\">\n    System-generated Text\n  </label>\n  {isEditable ? (\n    <textarea\n      id=\"outputText\"\n      className={`${styles.textarea} ${styles.side_by_side}`}\n      value={outputText}\n      onChange={(e) => setOutputText(e.target.value)} // Handle user edits\n      placeholder=\"Output\"\n    ></textarea>\n  ) : (\n    <div\n      id=\"diffText\"\n      className={`${styles.output_box} ${styles.side_by_side}`}\n      dangerouslySetInnerHTML={{ __html: diffHtml }}\n    ></div>\n  )}\n </div> */}\n\n// import React from \"react\";\n// import { useState, useEffect } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import DiffMatchPatch from \"diff-match-patch\";\n// import styles from \"./styles.module.css\";\n\n// const Review = () => {\n//   const { state } = useLocation();\n// //   const { inputText, outputText } = state || { inputText: \"\", outputText: \"\" };\n// //   const navigate = useNavigate();\n// const { inputText, outputText: initialOutputText } = state || {\n//     inputText: \"\",\n//     outputText: \"\",\n//   };\n//   const [outputText, setOutputText] = useState(initialOutputText);\n// \tconst [isLoading, setIsLoading] = useState(false);\n// \tconst [isEditable, setIsEditable] = useState(false); // For toggling edit mode\n// \tconst [diffHtml, setDiffHtml] = useState(\"\"); \n// \tconst [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n// \tconst [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n//     const navigate = useNavigate();\n\n// \tconst handleLogout = () => {\n// \t  localStorage.removeItem(\"token\");\n// \t  window.location.reload();\n// \t};\n\n// \t// Function to calculate and render diff\n// \tconst generateDiff = (input, output) => {\n// \tconst dmp = new DiffMatchPatch();\n// \tconst diffs = dmp.diff_main(input, output);\n// \tdmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n// \treturn dmp.diff_prettyHtml(diffs); // Generate diff HTML\n// \t};\n\n// \t// Effect to calculate diff whenever text changes\n// \tuseEffect(() => {\n// \tconst diffResult = generateDiff(inputText, outputText);\n// \tsetDiffHtml(diffResult);\n// \t}, [inputText, outputText]);\n\n//   \tconst handleSave = async (isAuto = false) => {\n// //\t\tsetIsSaveButtonVisible(false);\n// if (isAuto && isAuto.nativeEvent) {\n// \tisAuto = false; // Default behavior if called by an event\n// }\n\n// \t\ttry {\n// \t\t  const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n// \t\t  if (!user) {\n// \t\t\talert(\"User not logged in!\");\n// \t\t\treturn;\n// \t\t  }\n\n// \t\t  const payload = {\n// \t\t\tuserId: user._id,\n// \t\t\temail: user.email,\n// \t\t\tinputText,\n// \t\t\t...(isEditable ? { editedText: outputText } : { outputText, editableText: outputText }),\n// \t\t  };\n\n// \t\t  const endpoint = isEditable\n// \t\t\t? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n// \t\t\t: \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\n// \t\t  const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\n// \t\t  const response = await fetch(endpoint, {\n// \t\t\tmethod,\n// \t\t\theaders: { \"Content-Type\": \"application/json\" },\n// \t\t\tbody: JSON.stringify(payload),\n// \t\t  });\n\n// \t\t  if (response.ok) {\n// \t\t\tconst data = await response.json();\n\n// \t\t\talert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n// \t\t\t//setShowSurveyPrompt(true); \n// \t\t\tconsole.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n// \t\t\tconsole.log(\"isEditable\", isEditable);\n// \t\t\tconsole.log(\"isAuto\", isAuto);\n// \t\t\tif (!isSaveButtonVisible) {  //edit, save, edit\n// \t\t\t\tsetShowSurveyPrompt(false); // Show the survey prompt\n// \t\t\t  }\n// \t\t\telse if (isSaveButtonVisible && !isEditable && isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(false);\n// \t\t\t}\n// \t\t\telse if (isSaveButtonVisible && isEditable)\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t} \n// \t\t\telse if (isSaveButtonVisible && !isEditable && !isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t}\n\n// \t\t\tif (isEditable) {\n// \t\t\t {\n// \t\t\t\tsetIsEditable(false); // Exit editing mode after saving edits\n// \t\t\t  // disable saving button\n// \t\t\t  setIsSaveButtonVisible(false); // Hide the save button\n// \t\t\t   // Show the survey prompt\n// \t\t\t // setShowSurveyPrompt(true); \n// \t\t\t }\n// \t\t  }} else {\n// \t\t\tconst error = await response.json();\n// \t\t\talert(error.message || \"Failed to save simplification.\");\n// \t\t  }\n// \t\t} catch (error) {\n// \t\t  console.error(\"Error saving simplification:\", error);\n// \t\t  alert(\"An error occurred. Please try again.\");\n// \t\t}\n\n// \t  };\n\n// \tconst handleEdit = () => {\n// \t  let isAuto = true;\n// \t  handleSave(isAuto); // Save the current output text\n// \t  setIsEditable(true); // Enable editing mode\n// \t  setIsSaveButtonVisible(true);\n\n// \t  //navigate(\"/edit\"); // Navigate to edit page\n\n// \t  //setShowSurveyPrompt(false);\n\n// \t  // Add back button\n// \t};\n\n//   return (\n//     <>\n//     <nav className={styles.navbar}>\n//       <h1>Text Simplification Study</h1>\n//       <button className={styles.white_btn} onClick={handleLogout}>\n//         Logout\n//       </button>\n//     </nav>\n\n//     <div className={styles.main_container}>\n//         <div className={styles.description}>\n// \t\t\t  <p>\n// \t\t\t\tReview the generated output and make any necessary edits. Click the \"Edit\" button to make changes to the text. Once you are satisfied with the text, click the \"Save\" button to save your changes.\n// \t\t\t  </p>\n\n//             <br></br>\n\n//      \t\t\t<div className={styles.form_container}>\n//      \t\t\t  {/* Input and Output Boxes */}\n//      \t\t\t  <div className={styles.textareas_container}>\n//      \t\t\t\t{/* Input Text Box */}\n//      \t\t\t\t<div className={styles.text_container}>\n//      \t\t\t\t  <label className={styles.label} htmlFor=\"inputText\">\n//      \t\t\t\t\tInput Text\n//      \t\t\t\t  </label>\n//     \t\t\t\t  <textarea\n//     \t\t\t\t\tid=\"inputText\"\n//     \t\t\t\t\tclassName={`${styles.textarea} ${styles.side_by_side}`}\n//     \t\t\t\t\tvalue={inputText}\n//     \t\t\t\t\t//onChange={(e) => setInputText(e.target.value)}\n//     \t\t\t\t\treadOnly\n//     \t\t\t\t  ></textarea>\n//     \t\t\t\t</div>\n\n//     \t\t\t\t{/* Output Text Box */}\n//     \t\t\t\t<div className={styles.text_container}>\n//     \t\t\t\t  <label className={styles.label} htmlFor=\"diffText\">\n//     \t\t\t\t\tSystem-generated Text\n//     \t\t\t\t  </label>\n//     \t\t\t\t  <textarea\n//     \t\t\t\t\tid=\"diffText\"\n//     \t\t\t\t\tclassName={`${styles.output_box} ${styles.side_by_side}`}\n//     \t\t\t\t\tvalue={outputText}\n//     \t\t\t\t\tonChange={(e) => setOutputText(e.target.value)}\n// \t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: diffHtml }}\n//     \t\t\t\t\treadOnly={!isEditable}\n//     \t\t\t\t\tplaceholder=\"Output\"\n//     \t\t\t\t  ></textarea>\n//     \t\t\t\t</div>\n\n//     \t\t\t  </div>\n\n//     \t\t\t\t{/* Save and Edit Buttons */}\n//     \t\t\t\t<div className={styles.button_container}>\n\n//     \t\t\t\t{isSaveButtonVisible && (\n//     \t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.save_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleSave}\n//     \t\t\t\t\tdisabled={isLoading}\n//     \t\t\t\t>\n//     \t\t\t\t\tSave\n//     \t\t\t\t</button>\n//     \t\t\t\t)}\n\n//     \t\t\t\t{!isEditable && (\n//     \t\t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.edit_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleEdit}\n//     \t\t\t\t\t>\n//     \t\t\t\t\tEdit\n//     \t\t\t\t\t</button>\n//     \t\t\t\t)}\n//     \t\t\t\t</div>\n//           {/* Survey Prompt */}\n//     \t  {showSurveyPrompt && (\n//                   <div className={styles.survey_prompt}>\n//                     <p>\n//                       Please take the survey to help us improve {\" \"}\n//                       <button\n//                         className={styles.link_btn}\n//                         onClick={() =>\n//                           navigate(\"/survey\", {\n//                             state: { email: JSON.parse(localStorage.getItem(\"user\")).email, inputText },\n//                           })\n//                         }\n//                       >\n//                         Take the Survey\n//                       </button>\n//                     </p>\n//                   </div>\n//                 )}\n\n//     \t\t\t</div>\n//     \t\t</div> \n//     \t\t</div>\n//     \t  </>\n//   );\n// };\n\n// export default Review;\nvar _c;\n$RefreshReg$(_c, \"Review\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useLocation","useNavigate","DiffMatchPatch","styles","jsxDEV","_jsxDEV","Fragment","_Fragment","Review","_s","state","inputText","outputText","initialOutputText","setOutputText","diffHtml","setDiffHtml","isEditable","setIsEditable","editHistory","setEditHistory","isSidebarVisible","setIsSidebarVisible","navigate","isHistoryVisible","setIsHistoryVisible","contentEditableRef","isLoading","setIsLoading","isSaveButtonVisible","setIsSaveButtonVisible","showSurveyPrompt","setShowSurveyPrompt","generateDiff","input","output","dmp","diffs","diff_main","diff_cleanupSemantic","diff_prettyHtml","handleLogout","localStorage","removeItem","window","location","reload","diffResult","handleSave","isAuto","nativeEvent","user","JSON","parse","getItem","alert","payload","userId","_id","email","editedText","editableText","endpoint","method","response","fetch","headers","body","stringify","ok","data","json","console","log","prev","timestamp","Date","toLocaleString","text","error","message","handleEdit","handleHistoryClick","edit","children","className","navbar","fileName","_jsxFileName","lineNumber","columnNumber","white_btn","onClick","container","sidebar","expanded","historyIcon","historyContent","closeButton","historyList","map","index","historyItem","mainContent","withSidebar","textareas_container","text_container","label","htmlFor","id","textarea","side_by_side","value","readOnly","onChange","e","target","placeholder","output_box","dangerouslySetInnerHTML","__html","button_container","save_btn","text_btn","disabled","edit_btn","survey_prompt","link_btn","_c","$RefreshReg$"],"sources":["/Users/anukumar/Desktop/Autumn 2024/Text Simplification/project_v3/client/src/components/Review/index.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport DiffMatchPatch from \"diff-match-patch\";\nimport styles from \"./styles.module.css\";\n\nconst Review = () => {\n  const { state } = useLocation();\n  const { inputText, outputText: initialOutputText } = state || {\n    inputText: \"\",\n    outputText: \"\",\n  };\n  const [outputText, setOutputText] = useState(initialOutputText);\n  const [diffHtml, setDiffHtml] = useState(\"\");\n  const [isEditable, setIsEditable] = useState(false);\n  const [editHistory, setEditHistory] = useState([]);\n  const [isSidebarVisible, setIsSidebarVisible] = useState(false);\n  const navigate = useNavigate();\n\n\n  const [isHistoryVisible, setIsHistoryVisible] = useState(false); // Show/Hide history sidebar\n  const contentEditableRef = useRef(null); // Reference to the contentEditable div\n\n\tconst [isLoading, setIsLoading] = useState(false);\n\n\tconst [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n\tconst [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n\n\n  // Function to calculate and render diff\n  const generateDiff = (input, output) => {\n    const dmp = new DiffMatchPatch();\n    const diffs = dmp.diff_main(input, output);\n    dmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n    return dmp.diff_prettyHtml(diffs);\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  // Effect to calculate diff whenever text changes\n  useEffect(() => {\n    const diffResult = generateDiff(inputText, outputText);\n    setDiffHtml(diffResult);\n  }, [inputText, outputText]);\n\n//   const handleEdit = () => {\n//     setIsEditable(true);\n//   };\n\n//   const handleSave = () => {\n//     // Save the current state to history\n//     setEditHistory((prev) => [\n//       ...prev,\n//       { timestamp: new Date().toLocaleString(), text: outputText },\n//     ]);\n//     alert(\"Saved successfully!\");\n//     setIsEditable(false);\n//   };\n\n    const handleSave = async (isAuto = false) => {\n//\t\tsetIsSaveButtonVisible(false);\nif (isAuto && isAuto.nativeEvent) {\n\tisAuto = false; // Default behavior if called by an event\n}\n\n\t\t  \n\t\ttry {\n\t\t  const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n\t\t  if (!user) {\n\t\t\talert(\"User not logged in!\");\n\t\t\treturn;\n\t\t  }\n\t  \n\t\t  const payload = {\n\t\t\tuserId: user._id,\n\t\t\temail: user.email,\n\t\t\tinputText,\n\t\t\t...(isEditable ? { editedText: outputText } : { outputText, editableText: outputText }),\n\t\t  };\n\t  \n\t\t  const endpoint = isEditable\n\t\t\t? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n\t\t\t: \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\t  \n\t\t  const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\t  \n\t\t  const response = await fetch(endpoint, {\n\t\t\tmethod,\n\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\tbody: JSON.stringify(payload),\n\t\t  });\n\t  \n\t\t  if (response.ok) {\n\t\t\tconst data = await response.json();\n            \n\t\t\talert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n\t\t\t//setShowSurveyPrompt(true); \n\t\t\tconsole.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n\t\t\tconsole.log(\"isEditable\", isEditable);\n\t\t\tconsole.log(\"isAuto\", isAuto);\n\t\t\tif (!isSaveButtonVisible) {  //edit, save, edit\n\t\t\t\tsetShowSurveyPrompt(false); // Show the survey prompt\n\t\t\t  }\n\t\t\telse if (isSaveButtonVisible && !isEditable && isAuto)  //true false -- first time save or edit button clicked\n\t\t\t{\n\t\t\t\tsetShowSurveyPrompt(false);\n\t\t\t}\n\t\t\telse if (isSaveButtonVisible && isEditable)\n\t\t\t{\n\t\t\t\tsetShowSurveyPrompt(true);\n\t\t\t} \n\t\t\telse if (isSaveButtonVisible && !isEditable && !isAuto)  //true false -- first time save or edit button clicked\n\t\t\t{\n\t\t\t\tsetShowSurveyPrompt(true);\n\t\t\t}\n\n\t\t\tsetEditHistory((prev) => [\n\t\t\t\t...prev,\n\t\t\t\t{ timestamp: new Date().toLocaleString(), text: outputText },\n\t\t\t  ]);\n\n\t\t\tif (isEditable) {\n\t\t\t {\n\t\t\t\tsetIsEditable(false); // Exit editing mode after saving edits\n\t\t\t  // disable saving button\n\t\t\t  setIsSaveButtonVisible(false); // Hide the save button\n\t\t\t   // Show the survey prompt\n\t\t\t // setShowSurveyPrompt(true); \n\t\t\t }\n\n\n\t\t  }} else {\n\t\t\tconst error = await response.json();\n\t\t\talert(error.message || \"Failed to save simplification.\");\n\t\t  }\n\t\t} catch (error) {\n\t\t  console.error(\"Error saving simplification:\", error);\n\t\t  alert(\"An error occurred. Please try again.\");\n\t\t}\n\n\t  };\n\n\n\tconst handleEdit = () => {\n\t  let isAuto = true;\n\t  handleSave(isAuto); // Save the current output text\n\t  setIsEditable(true); // Enable editing mode\n\t  setIsSaveButtonVisible(true);\n\n\t};\n\n  const handleHistoryClick = (edit) => {\n    setOutputText(edit.text);\n    const diffResult = generateDiff(inputText, edit.text);\n    setDiffHtml(diffResult);\n    setIsEditable(false);\n  };\n\n  return (\n    <>\n      <nav className={styles.navbar}>\n        <h1>Text Simplification Study</h1>\n        <button className={styles.white_btn} onClick={handleLogout}>\n          Logout\n        </button>\n      </nav>\n\n      <div className={styles.container}>\n        {/* Sidebar */}\n        <div\n          className={`${styles.sidebar} ${\n            isSidebarVisible ? styles.expanded : \"\"\n          }`}\n        >\n          <button\n            className={styles.historyIcon}\n            onClick={() => setIsSidebarVisible(!isSidebarVisible)}\n          >\n            ðŸ•’ {/* History Icon */}\n          </button>\n          {isSidebarVisible && (\n            <div className={styles.historyContent}>\n              <button\n                className={styles.closeButton}\n                onClick={() => setIsSidebarVisible(false)}\n              >\n                âœ–\n              </button>\n              <h3>Edit History</h3>\n              <ul className={styles.historyList}>\n                {editHistory.map((edit, index) => (\n                  <li\n                    key={index}\n                    className={styles.historyItem}\n                    onClick={() => handleHistoryClick(edit)}\n                  >\n                    {edit.timestamp}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n        </div>\n\n        {/* Main Content */}\n        <div\n          className={`${styles.mainContent} ${\n            isSidebarVisible ? styles.withSidebar : \"\"\n          }`}\n        >\n          <div className={styles.textareas_container}>\n            {/* Input Text */}\n            <div className={styles.text_container}>\n              <label className={styles.label} htmlFor=\"inputText\">\n                Input Text\n              </label>\n              <textarea\n                id=\"inputText\"\n                className={`${styles.textarea} ${styles.side_by_side}`}\n                value={inputText}\n                readOnly\n              ></textarea>\n            </div>\n\n            {/* Output Text */}\n            <div className={styles.text_container}>\n              <label className={styles.label} htmlFor=\"outputText\">\n                System-generated Text\n              </label>\n              {isEditable ? (\n                <textarea\n                  id=\"outputText\"\n                  className={`${styles.textarea} ${styles.side_by_side}`}\n                  value={outputText}\n                  onChange={(e) => setOutputText(e.target.value)}\n                  placeholder=\"Output\"\n                ></textarea>\n              ) : (\n                <div\n                  id=\"diffText\"\n                  className={`${styles.output_box} ${styles.side_by_side}`}\n                  dangerouslySetInnerHTML={{ __html: diffHtml }}\n                ></div>\n              )}\n            </div>\n          </div>\n\n          {/* Buttons */}\n\t\t\t<div className={styles.button_container}>\n\n    \n    \t\t\t\t{isSaveButtonVisible && (\n    \t\t\t\t<button\n    \t\t\t\t\tclassName={`${styles.save_btn} ${styles.text_btn}`}\n    \t\t\t\t\tonClick={handleSave}\n    \t\t\t\t\tdisabled={isLoading}\n    \t\t\t\t>\n    \t\t\t\t\tSave\n    \t\t\t\t</button>\n    \t\t\t\t)}\n    \n    \t\t\t\t{!isEditable && (\n    \t\t\t\t\t<button\n    \t\t\t\t\tclassName={`${styles.edit_btn} ${styles.text_btn}`}\n    \t\t\t\t\tonClick={handleEdit}\n    \t\t\t\t\t>\n    \t\t\t\t\tEdit\n    \t\t\t\t\t</button>\n    \t\t\t\t)}\n    \t\t\t\t</div>\n          {/* Survey Prompt */}\n    \t  {showSurveyPrompt && (\n                  <div className={styles.survey_prompt}>\n                    <p>\n                      Please take the survey to help us improve {\" \"}\n                      <button\n                        className={styles.link_btn}\n                        onClick={() =>\n                          navigate(\"/survey\", {\n                            state: { email: JSON.parse(localStorage.getItem(\"user\")).email, inputText },\n                          })\n                        }\n                      >\n                        Take the Survey\n                      </button>\n                    </p>\n                  </div>\n                )}\n    \n    \t\n          {/* <div className={styles.button_container}>\n            {isEditable ? (\n              <button\n                className={`${styles.save_btn} ${styles.text_btn}`}\n                onClick={handleSave}\n              >\n                Save\n              </button>\n            ) : (\n              <button\n                className={`${styles.edit_btn} ${styles.text_btn}`}\n                onClick={handleEdit}\n              >\n                Edit\n              </button>\n            )}\n          </div> */}\n\n\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Review;\n\n\n// import React from \"react\";\n// import { useState, useEffect, useRef } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import DiffMatchPatch from \"diff-match-patch\";\n// import styles from \"./styles.module.css\";\n\n// const Review = () => {\n//   const { state } = useLocation();\n//   const { inputText, outputText: initialOutputText } = state || {\n//     inputText: \"\",\n//     outputText: \"\",\n//   };\n//   const [outputText, setOutputText] = useState(initialOutputText);\n//   const [diffHtml, setDiffHtml] = useState(\"\"); // State for storing diff HTML\n//   const [isEditable, setIsEditable] = useState(false);\n//   const [editHistory, setEditHistory] = useState([]); // Array to store edit history\n//   const [isHistoryVisible, setIsHistoryVisible] = useState(false); // Show/Hide history sidebar\n//   const navigate = useNavigate();\n//   const contentEditableRef = useRef(null); // Reference to the contentEditable div\n\n// \tconst [isLoading, setIsLoading] = useState(false);\n\n// \tconst [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n// \tconst [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n\n\n\n//   // Function to calculate and render diff\n//   const generateDiff = (input, output) => {\n//     const dmp = new DiffMatchPatch();\n//     const diffs = dmp.diff_main(input, output);\n//     dmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n//     return dmp.diff_prettyHtml(diffs); // Generate diff HTML\n\t\n//   };\n\n\n  \n\n//   // Effect to calculate diff whenever text changes\n//   useEffect(() => {\n//     const diffResult = generateDiff(inputText, outputText);\n//     setDiffHtml(diffResult);\n//   }, [inputText, outputText]);\n\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"token\");\n//     window.location.reload();\n//   };\n\n//   \tconst handleSave = async (isAuto = false) => {\n// //\t\tsetIsSaveButtonVisible(false);\n// if (isAuto && isAuto.nativeEvent) {\n// \tisAuto = false; // Default behavior if called by an event\n// }\n\n\t\t  \n// \t\ttry {\n// \t\t  const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n// \t\t  if (!user) {\n// \t\t\talert(\"User not logged in!\");\n// \t\t\treturn;\n// \t\t  }\n\t  \n// \t\t  const payload = {\n// \t\t\tuserId: user._id,\n// \t\t\temail: user.email,\n// \t\t\tinputText,\n// \t\t\t...(isEditable ? { editedText: outputText } : { outputText, editableText: outputText }),\n// \t\t  };\n\t  \n// \t\t  const endpoint = isEditable\n// \t\t\t? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n// \t\t\t: \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\t  \n// \t\t  const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\t  \n// \t\t  const response = await fetch(endpoint, {\n// \t\t\tmethod,\n// \t\t\theaders: { \"Content-Type\": \"application/json\" },\n// \t\t\tbody: JSON.stringify(payload),\n// \t\t  });\n\t  \n// \t\t  if (response.ok) {\n// \t\t\tconst data = await response.json();\n            \n// \t\t\talert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n// \t\t\t//setShowSurveyPrompt(true); \n// \t\t\tconsole.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n// \t\t\tconsole.log(\"isEditable\", isEditable);\n// \t\t\tconsole.log(\"isAuto\", isAuto);\n// \t\t\tif (!isSaveButtonVisible) {  //edit, save, edit\n// \t\t\t\tsetShowSurveyPrompt(false); // Show the survey prompt\n// \t\t\t  }\n// \t\t\telse if (isSaveButtonVisible && !isEditable && isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(false);\n// \t\t\t}\n// \t\t\telse if (isSaveButtonVisible && isEditable)\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t} \n// \t\t\telse if (isSaveButtonVisible && !isEditable && !isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t}\n\n// \t\t\tsetEditHistory((prev) => [\n// \t\t\t\t...prev,\n// \t\t\t\t{ timestamp: new Date().toLocaleString(), text: outputText },\n// \t\t\t  ]);\n\n// \t\t\tif (isEditable) {\n// \t\t\t {\n// \t\t\t\tsetIsEditable(false); // Exit editing mode after saving edits\n// \t\t\t  // disable saving button\n// \t\t\t  setIsSaveButtonVisible(false); // Hide the save button\n// \t\t\t   // Show the survey prompt\n// \t\t\t // setShowSurveyPrompt(true); \n// \t\t\t }\n\n\n// \t\t  }} else {\n// \t\t\tconst error = await response.json();\n// \t\t\talert(error.message || \"Failed to save simplification.\");\n// \t\t  }\n// \t\t} catch (error) {\n// \t\t  console.error(\"Error saving simplification:\", error);\n// \t\t  alert(\"An error occurred. Please try again.\");\n// \t\t}\n\n// \t  };\n\n// \t  const handleHistoryClick = (edit) => {\n// \t\tsetOutputText(edit.text);\n// \t\tconst diffResult = generateDiff(inputText, edit.text);\n// \t\tsetDiffHtml(diffResult);\n// \t\tsetIsEditable(false);\n// \t  };\n\n// \tconst handleEdit = () => {\n// \t  let isAuto = true;\n// \t  handleSave(isAuto); // Save the current output text\n// \t  setIsEditable(true); // Enable editing mode\n// \t  setIsSaveButtonVisible(true);\n\n// \t};\n  \n//   return (\n//     <>\n//       <nav className={styles.navbar}>\n//         <h1>Text Simplification Study</h1>\n//         <button className={styles.white_btn} onClick={handleLogout}>\n//           Logout\n//         </button>\n//       </nav>\n\n//       <div className={styles.main_container}>\n//         <div className={styles.description}>\n//           <p>\n//             Review the generated output and make any necessary edits. Changes\n//             are highlighted in real-time for easy visualization.\n//           </p>\n\n//       {/* Sidebar */}\n//       <div className={styles.sidebar}>\n//         <button\n//           className={styles.historyIcon}\n//           onClick={() => setIsHistoryVisible(!isHistoryVisible)}\n//         >\n//           ðŸ•’ {/* History Icon */}\n//         </button>\n//         {isHistoryVisible && (\n//           <div className={styles.historyPanel}>\n//             <h3>Edit History</h3>\n//             <ul className={styles.historyList}>\n//               {editHistory.map((edit, index) => (\n//                 <li\n//                   key={index}\n//                   className={styles.historyItem}\n//                   onClick={() => handleHistoryClick(edit)}\n//                 >\n//                   {edit.timestamp}\n//                 </li>\n//               ))}\n//             </ul>\n//           </div>\n//         )}\n//       </div>\n\n//           <div className={styles.form_container}>\n//             {/* Input and Diff Boxes */}\n//             <div className={styles.textareas_container}>\n//               {/* Input Text Box */}\n//               <div className={styles.text_container}>\n//                 <label className={styles.label} htmlFor=\"inputText\">\n//                   Input Text\n//                 </label>\n//                 <textarea\n//                   id=\"inputText\"\n//                   className={`${styles.textarea} ${styles.side_by_side}`}\n//                   value={inputText}\n//                   readOnly\n//                 ></textarea>\n//               </div>\n// <div className={styles.text_container}>\n//   <label className={styles.label} htmlFor=\"outputText\">\n//     System-generated Text\n//   </label>\n\n// {isEditable ? (\n//     <>\n//       <textarea\n//         id=\"outputText\"\n//         className={`${styles.textarea} ${styles.side_by_side}`}\n//         value={outputText}\n//         onChange={(e) => {\n//           const updatedText = e.target.value;\n//           setOutputText(updatedText); // Update the output text state\n//           const updatedDiff = generateDiff(inputText, updatedText); // Recalculate the diff\n//           setDiffHtml(updatedDiff); // Update the diff HTML in real-time\n\t\t\n//         }}\n//         placeholder=\"Output\"\n//       ></textarea>\n\n//     </>\n//   ) : (\n//     <div\n//       id=\"diffText\"\n//       className={`${styles.output_box} ${styles.side_by_side}`}\n//       dangerouslySetInnerHTML={{ __html: diffHtml }}\n//     ></div>\n//   )} \n// </div>\n\n\n\n\n//             </div>\n\n\n//     \t\t\t\t<div className={styles.button_container}>\n\n    \n//     \t\t\t\t{isSaveButtonVisible && (\n//     \t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.save_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleSave}\n//     \t\t\t\t\tdisabled={isLoading}\n//     \t\t\t\t>\n//     \t\t\t\t\tSave\n//     \t\t\t\t</button>\n//     \t\t\t\t)}\n    \n//     \t\t\t\t{!isEditable && (\n//     \t\t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.edit_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleEdit}\n//     \t\t\t\t\t>\n//     \t\t\t\t\tEdit\n//     \t\t\t\t\t</button>\n//     \t\t\t\t)}\n//     \t\t\t\t</div>\n//           {/* Survey Prompt */}\n//     \t  {showSurveyPrompt && (\n//                   <div className={styles.survey_prompt}>\n//                     <p>\n//                       Please take the survey to help us improve {\" \"}\n//                       <button\n//                         className={styles.link_btn}\n//                         onClick={() =>\n//                           navigate(\"/survey\", {\n//                             state: { email: JSON.parse(localStorage.getItem(\"user\")).email, inputText },\n//                           })\n//                         }\n//                       >\n//                         Take the Survey\n//                       </button>\n//                     </p>\n//                   </div>\n//                 )}\n    \n//     \t\t\t</div>\n\n//     \t\t</div> \n//     \t\t</div>\n//     \t  </>\n//   );\n// };\n\n\n// export default Review;\n\n{/* \n\t\t\t  <div className={styles.text_container}>\n  <label className={styles.label} htmlFor=\"outputText\">\n    System-generated Text\n  </label>\n  {isEditable ? (\n    <textarea\n      id=\"outputText\"\n      className={`${styles.textarea} ${styles.side_by_side}`}\n      value={outputText}\n      onChange={(e) => setOutputText(e.target.value)} // Handle user edits\n      placeholder=\"Output\"\n    ></textarea>\n  ) : (\n    <div\n      id=\"diffText\"\n      className={`${styles.output_box} ${styles.side_by_side}`}\n      dangerouslySetInnerHTML={{ __html: diffHtml }}\n    ></div>\n  )}\n</div> */}\n\n\n\n// import React from \"react\";\n// import { useState, useEffect } from \"react\";\n// import { useLocation, useNavigate } from \"react-router-dom\";\n// import DiffMatchPatch from \"diff-match-patch\";\n// import styles from \"./styles.module.css\";\n\n// const Review = () => {\n//   const { state } = useLocation();\n// //   const { inputText, outputText } = state || { inputText: \"\", outputText: \"\" };\n// //   const navigate = useNavigate();\n// const { inputText, outputText: initialOutputText } = state || {\n//     inputText: \"\",\n//     outputText: \"\",\n//   };\n//   const [outputText, setOutputText] = useState(initialOutputText);\n// \tconst [isLoading, setIsLoading] = useState(false);\n// \tconst [isEditable, setIsEditable] = useState(false); // For toggling edit mode\n// \tconst [diffHtml, setDiffHtml] = useState(\"\"); \n// \tconst [isSaveButtonVisible, setIsSaveButtonVisible] = useState(true);\n// \tconst [showSurveyPrompt, setShowSurveyPrompt] = useState(false); // State for survey prompt\n//     const navigate = useNavigate();\n\n// \tconst handleLogout = () => {\n// \t  localStorage.removeItem(\"token\");\n// \t  window.location.reload();\n// \t};\n\n// \t// Function to calculate and render diff\n// \tconst generateDiff = (input, output) => {\n// \tconst dmp = new DiffMatchPatch();\n// \tconst diffs = dmp.diff_main(input, output);\n// \tdmp.diff_cleanupSemantic(diffs); // Optional cleanup for better readability\n// \treturn dmp.diff_prettyHtml(diffs); // Generate diff HTML\n// \t};\n\n// \t// Effect to calculate diff whenever text changes\n// \tuseEffect(() => {\n// \tconst diffResult = generateDiff(inputText, outputText);\n// \tsetDiffHtml(diffResult);\n// \t}, [inputText, outputText]);\n\t\n\n\n//   \tconst handleSave = async (isAuto = false) => {\n// //\t\tsetIsSaveButtonVisible(false);\n// if (isAuto && isAuto.nativeEvent) {\n// \tisAuto = false; // Default behavior if called by an event\n// }\n\n\t\t  \n// \t\ttry {\n// \t\t  const user = JSON.parse(localStorage.getItem(\"user\")); // Retrieve user info\n// \t\t  if (!user) {\n// \t\t\talert(\"User not logged in!\");\n// \t\t\treturn;\n// \t\t  }\n\t  \n// \t\t  const payload = {\n// \t\t\tuserId: user._id,\n// \t\t\temail: user.email,\n// \t\t\tinputText,\n// \t\t\t...(isEditable ? { editedText: outputText } : { outputText, editableText: outputText }),\n// \t\t  };\n\t  \n// \t\t  const endpoint = isEditable\n// \t\t\t? \"http://localhost:8080/api/simplifications/edit\" // Endpoint for updating\n// \t\t\t: \"http://localhost:8080/api/simplifications\"; // Endpoint for initial save\n\t  \n// \t\t  const method = isEditable ? \"PUT\" : \"POST\"; // Use PUT for updates, POST for saves\n\t  \n// \t\t  const response = await fetch(endpoint, {\n// \t\t\tmethod,\n// \t\t\theaders: { \"Content-Type\": \"application/json\" },\n// \t\t\tbody: JSON.stringify(payload),\n// \t\t  });\n\t  \n// \t\t  if (response.ok) {\n// \t\t\tconst data = await response.json();\n            \n// \t\t\talert(isEditable ? \"Edited text saved successfully!\" : \"Simplification saved successfully!\");\n\n// \t\t\t//setShowSurveyPrompt(true); \n// \t\t\tconsole.log(\"isSaveButtonVisible\", isSaveButtonVisible);\n// \t\t\tconsole.log(\"isEditable\", isEditable);\n// \t\t\tconsole.log(\"isAuto\", isAuto);\n// \t\t\tif (!isSaveButtonVisible) {  //edit, save, edit\n// \t\t\t\tsetShowSurveyPrompt(false); // Show the survey prompt\n// \t\t\t  }\n// \t\t\telse if (isSaveButtonVisible && !isEditable && isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(false);\n// \t\t\t}\n// \t\t\telse if (isSaveButtonVisible && isEditable)\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t} \n// \t\t\telse if (isSaveButtonVisible && !isEditable && !isAuto)  //true false -- first time save or edit button clicked\n// \t\t\t{\n// \t\t\t\tsetShowSurveyPrompt(true);\n// \t\t\t}\n\n\n// \t\t\tif (isEditable) {\n// \t\t\t {\n// \t\t\t\tsetIsEditable(false); // Exit editing mode after saving edits\n// \t\t\t  // disable saving button\n// \t\t\t  setIsSaveButtonVisible(false); // Hide the save button\n// \t\t\t   // Show the survey prompt\n// \t\t\t // setShowSurveyPrompt(true); \n// \t\t\t }\n// \t\t  }} else {\n// \t\t\tconst error = await response.json();\n// \t\t\talert(error.message || \"Failed to save simplification.\");\n// \t\t  }\n// \t\t} catch (error) {\n// \t\t  console.error(\"Error saving simplification:\", error);\n// \t\t  alert(\"An error occurred. Please try again.\");\n// \t\t}\n\n// \t  };\n\t  \n\t\n  \n// \tconst handleEdit = () => {\n// \t  let isAuto = true;\n// \t  handleSave(isAuto); // Save the current output text\n// \t  setIsEditable(true); // Enable editing mode\n// \t  setIsSaveButtonVisible(true);\n\n// \t  //navigate(\"/edit\"); // Navigate to edit page\n\n// \t  //setShowSurveyPrompt(false);\n\n// \t  // Add back button\n// \t};\n  \n//   return (\n//     <>\n//     <nav className={styles.navbar}>\n//       <h1>Text Simplification Study</h1>\n//       <button className={styles.white_btn} onClick={handleLogout}>\n//         Logout\n//       </button>\n//     </nav>\n\n//     <div className={styles.main_container}>\n//         <div className={styles.description}>\n// \t\t\t  <p>\n// \t\t\t\tReview the generated output and make any necessary edits. Click the \"Edit\" button to make changes to the text. Once you are satisfied with the text, click the \"Save\" button to save your changes.\n// \t\t\t  </p>\n\t\t\t\n//             <br></br>\n            \n//      \t\t\t<div className={styles.form_container}>\n//      \t\t\t  {/* Input and Output Boxes */}\n//      \t\t\t  <div className={styles.textareas_container}>\n//      \t\t\t\t{/* Input Text Box */}\n//      \t\t\t\t<div className={styles.text_container}>\n//      \t\t\t\t  <label className={styles.label} htmlFor=\"inputText\">\n//      \t\t\t\t\tInput Text\n//      \t\t\t\t  </label>\n//     \t\t\t\t  <textarea\n//     \t\t\t\t\tid=\"inputText\"\n//     \t\t\t\t\tclassName={`${styles.textarea} ${styles.side_by_side}`}\n//     \t\t\t\t\tvalue={inputText}\n//     \t\t\t\t\t//onChange={(e) => setInputText(e.target.value)}\n//     \t\t\t\t\treadOnly\n//     \t\t\t\t  ></textarea>\n//     \t\t\t\t</div>\n      \n//     \t\t\t\t{/* Output Text Box */}\n//     \t\t\t\t<div className={styles.text_container}>\n//     \t\t\t\t  <label className={styles.label} htmlFor=\"diffText\">\n//     \t\t\t\t\tSystem-generated Text\n//     \t\t\t\t  </label>\n//     \t\t\t\t  <textarea\n//     \t\t\t\t\tid=\"diffText\"\n//     \t\t\t\t\tclassName={`${styles.output_box} ${styles.side_by_side}`}\n//     \t\t\t\t\tvalue={outputText}\n//     \t\t\t\t\tonChange={(e) => setOutputText(e.target.value)}\n// \t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: diffHtml }}\n//     \t\t\t\t\treadOnly={!isEditable}\n//     \t\t\t\t\tplaceholder=\"Output\"\n//     \t\t\t\t  ></textarea>\n//     \t\t\t\t</div>\n\n//     \t\t\t  </div>\n    \n    \n//     \t\t\t\t{/* Save and Edit Buttons */}\n//     \t\t\t\t<div className={styles.button_container}>\n\n    \n//     \t\t\t\t{isSaveButtonVisible && (\n//     \t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.save_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleSave}\n//     \t\t\t\t\tdisabled={isLoading}\n//     \t\t\t\t>\n//     \t\t\t\t\tSave\n//     \t\t\t\t</button>\n//     \t\t\t\t)}\n    \n//     \t\t\t\t{!isEditable && (\n//     \t\t\t\t\t<button\n//     \t\t\t\t\tclassName={`${styles.edit_btn} ${styles.text_btn}`}\n//     \t\t\t\t\tonClick={handleEdit}\n//     \t\t\t\t\t>\n//     \t\t\t\t\tEdit\n//     \t\t\t\t\t</button>\n//     \t\t\t\t)}\n//     \t\t\t\t</div>\n//           {/* Survey Prompt */}\n//     \t  {showSurveyPrompt && (\n//                   <div className={styles.survey_prompt}>\n//                     <p>\n//                       Please take the survey to help us improve {\" \"}\n//                       <button\n//                         className={styles.link_btn}\n//                         onClick={() =>\n//                           navigate(\"/survey\", {\n//                             state: { email: JSON.parse(localStorage.getItem(\"user\")).email, inputText },\n//                           })\n//                         }\n//                       >\n//                         Take the Survey\n//                       </button>\n//                     </p>\n//                   </div>\n//                 )}\n    \n//     \t\t\t</div>\n//     \t\t</div> \n//     \t\t</div>\n//     \t  </>\n//   );\n// };\n\n// export default Review;"],"mappings":"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,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAsBJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA,eACN,CAAC;AAEP,CAAC;AAACjF,EAAA,CAvTID,MAAM;EAAA,QACQR,WAAW,EAUZC,WAAW;AAAA;AAAA+H,EAAA,GAXxBxH,MAAM;AAyTZ,eAAeA,MAAM;;AAGrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA;;AAGA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UApBC;;AAwBD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA,IAAAwH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}